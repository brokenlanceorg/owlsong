package math;

import java.util.*;

/**
 * Supposing that the data has been mapped into [0, 1], the higher the
 * (1, 0.05) entropy, the more variable the series is, while the higher 
 * the (10, 0.05) entropy, the more trending the data is in the long run.
 */
public class ApproximateEntropy
{
   private double[] _theSequence;
   private double _theEntropy = -1;
   private int _sequenceSize = 2;
   private double _radius = 0;
   private int _index = 0;

   public ApproximateEntropy()
   {
   }

   public ApproximateEntropy( double[] array )
   {
      _theSequence = array;
   }

   public ApproximateEntropy( double[] array, int seq, double rad )
   {
      _theSequence = array;
      _sequenceSize = seq;
      _radius = rad;
   }

   public double getEntropy()
   {
      if( _theEntropy == -1 )
      {
         calculateEntropy();
         double temp = _theEntropy;
         _sequenceSize += 1;
         calculateEntropy();
         _theEntropy = temp - _theEntropy;
      }

      return _theEntropy;
   }

   private double absolute( double value )
   {
      return ( value < 0 ? value * -1: value );
   }

   private int countSimilarInstances( int start )
   {
      int count = 0;
      double distance = 0;

      for( int i=0; i<_index; i++ )
      {
         count++;
         for( int j=0; j<_sequenceSize; j++ )
         {
            distance = absolute( _theSequence[ i + j ] - _theSequence[ start + j ] );
            if( distance > _radius )
            {
               count--;
               break;
            }
         }
      }
      return count;
   }

   private void calculateEntropy()
   {
      _index = _theSequence.length - _sequenceSize + 1;
      //System.out.println( "The index size for " + _index );
      int Cimr = 0;
      double sum = 0;

      for( int i=0; i<_index; i++ )
      {
         Cimr = countSimilarInstances( i );
         sum += Math.log( (double)Cimr / (double)_index );
         //System.out.println( "The size for " + i + " is: " + Cimr );
         //System.out.println( "The sum for " + i + " is: " + sum );
      }
      _theEntropy = sum / (double)_index;
   }

   public static void main( String[] args )
   {
/*
      double[] theArray = new double[50];
      for( int i=0; i<50; i++ )
      {
         theArray[i] = ( i * i ) / ( i + i + 1);
         System.out.println( theArray[i] );
      }
*/

         ArrayList<Double> temp = new ArrayList<Double>();
         // Retail / Food Service
         // The approximate entropy is: -0.004987541511036753
         // The (1, 0.05) approximate entropy is: 0.28951263759917367
         // The (2, 0.05) approximate entropy is: 0.2531390855829403
//          temp.add( 123027.0 );
//          temp.add( 121678.0 );
//          temp.add( 120606.0 );
//          temp.add( 122886.0 );
//          temp.add( 124132.0 );
//          temp.add( 123889.0 );
//          temp.add( 125251.0 );
//          temp.add( 124997.0 );
//          temp.add( 125674.0 );
//          temp.add( 125847.0 );
//          temp.add( 126895.0 );
//          temp.add( 127504.0 );
//          temp.add( 127100.0 );
//          temp.add( 128536.0 );
//          temp.add( 130358.0 );
//          temp.add( 130622.0 );
//          temp.add( 129695.0 );
//          temp.add( 130903.0 );
//          temp.add( 130882.0 );
//          temp.add( 131925.0 );
//          temp.add( 132536.0 );
//          temp.add( 134057.0 );
//          temp.add( 133712.0 );
//          temp.add( 134003.0 );
//          temp.add( 134352.0 );
//          temp.add( 131779.0 );
//          temp.add( 132626.0 );
//          temp.add( 132879.0 );
//          temp.add( 133679.0 );
//          temp.add( 135036.0 );
//          temp.add( 134742.0 );
//          temp.add( 135302.0 );
//          temp.add( 135528.0 );
//          temp.add( 134648.0 );
//          temp.add( 135935.0 );
//          temp.add( 137149.0 );
//          temp.add( 135167.0 );
//          temp.add( 137199.0 );
//          temp.add( 137944.0 );
//          temp.add( 137787.0 );
//          temp.add( 138530.0 );
//          temp.add( 138290.0 );
//          temp.add( 138087.0 );
//          temp.add( 137975.0 );
//          temp.add( 139339.0 );
//          temp.add( 139976.0 );
//          temp.add( 139485.0 );
//          temp.add( 139721.0 );
//          temp.add( 140378.0 );
//          temp.add( 141432.0 );
//          temp.add( 141921.0 );
//          temp.add( 140683.0 );
//          temp.add( 139653.0 );
//          temp.add( 141309.0 );
//          temp.add( 142885.0 );
//          temp.add( 143182.0 );
//          temp.add( 143054.0 );
//          temp.add( 142539.0 );
//          temp.add( 143049.0 );
//          temp.add( 143255.0 );
//          temp.add( 143407.0 );
//          temp.add( 143459.0 );
//          temp.add( 144368.0 );
//          temp.add( 145779.0 );
//          temp.add( 146252.0 );
//          temp.add( 146883.0 );
//          temp.add( 145651.0 );
//          temp.add( 144902.0 );
//          temp.add( 146347.0 );
//          temp.add( 148206.0 );
//          temp.add( 149133.0 );
//          temp.add( 150220.0 );
//          temp.add( 150352.0 );
//          temp.add( 151866.0 );
//          temp.add( 152370.0 );
//          temp.add( 152326.0 );
//          temp.add( 153931.0 );
//          temp.add( 154039.0 );
//          temp.add( 154672.0 );
//          temp.add( 156041.0 );
//          temp.add( 156144.0 );
//          temp.add( 156165.0 );
//          temp.add( 157596.0 );
//          temp.add( 160082.0 );
//          temp.add( 158940.0 );
//          temp.add( 160524.0 );
//          temp.add( 161292.0 );
//          temp.add( 159076.0 );
//          temp.add( 158824.0 );
//          temp.add( 158859.0 );
//          temp.add( 158295.0 );
//          temp.add( 158289.0 );
//          temp.add( 160182.0 );
//          temp.add( 159622.0 );
//          temp.add( 158536.0 );
//          temp.add( 158275.0 );
//          temp.add( 159084.0 );
//          temp.add( 158679.0 );
//          temp.add( 157358.0 );
//          temp.add( 159325.0 );
//          temp.add( 159239.0 );
//          temp.add( 158152.0 );
//          temp.add( 158057.0 );
//          temp.add( 158932.0 );
//          temp.add( 155396.0 );
//          temp.add( 166158.0 );
//          temp.add( 161845.0 );
//          temp.add( 160323.0 );
//          temp.add( 160035.0 );
//          temp.add( 160725.0 );
//          temp.add( 159654.0 );
//          temp.add( 161329.0 );
//          temp.add( 159013.0 );
//          temp.add( 160243.0 );
//          temp.add( 161731.0 );
//          temp.add( 162466.0 );
//          temp.add( 159759.0 );
//          temp.add( 160057.0 );
//          temp.add( 160896.0 );
//          temp.add( 161697.0 );
//          temp.add( 162089.0 );
//          temp.add( 159000.0 );
//          temp.add( 161352.0 );
//          temp.add( 161478.0 );
//          temp.add( 162104.0 );
//          temp.add( 163756.0 );
//          temp.add( 165004.0 );
//          temp.add( 166786.0 );
//          temp.add( 165288.0 );
//          temp.add( 164833.0 );
//          temp.add( 166852.0 );
//          temp.add( 165645.0 );
//          temp.add( 166135.0 );
//          temp.add( 166966.0 );
//          temp.add( 169677.0 );
//          temp.add( 167408.0 );
//          temp.add( 169510.0 );
//          temp.add( 166800.0 );
//          temp.add( 168424.0 );
//          temp.add( 168409.0 );
//          temp.add( 170810.0 );
//          temp.add( 170992.0 );
//          temp.add( 171036.0 );
//          temp.add( 172730.0 );
//          temp.add( 172038.0 );
//          temp.add( 173054.0 );
//          temp.add( 172253.0 );
//          temp.add( 174286.0 );
//          temp.add( 172883.0 );
//          temp.add( 176698.0 );
//          temp.add( 177938.0 );
//          temp.add( 174323.0 );
//          temp.add( 172212.0 );
//          temp.add( 172671.0 );
//          temp.add( 175008.0 );
//          temp.add( 174895.0 );
//          temp.add( 179481.0 );
//          temp.add( 177759.0 );
//          temp.add( 178215.0 );
//          temp.add( 178333.0 );
//          temp.add( 176761.0 );
//          temp.add( 176295.0 );
//          temp.add( 176814.0 );
//          temp.add( 176332.0 );
//          temp.add( 176052.0 );
//          temp.add( 177291.0 );
//          temp.add( 177811.0 );
//          temp.add( 179267.0 );
//          temp.add( 178429.0 );
//          temp.add( 178377.0 );
//          temp.add( 179296.0 );
//          temp.add( 177572.0 );
//          temp.add( 179033.0 );
//          temp.add( 176854.0 );
//          temp.add( 177351.0 );
//          temp.add( 177468.0 );
//          temp.add( 178521.0 );
//          temp.add( 178782.0 );
//          temp.add( 179843.0 );
//          temp.add( 177777.0 );
//          temp.add( 177069.0 );
//          temp.add( 175298.0 );
//          temp.add( 175434.0 );
//          temp.add( 175708.0 );
//          temp.add( 175156.0 );
//          temp.add( 173270.0 );
//          temp.add( 171128.0 );
//          temp.add( 169877.0 );
//          temp.add( 167097.0 );
//          temp.add( 163695.0 );
//          temp.add( 163041.0 );
//          temp.add( 159014.0 );
//          temp.add( 161196.0 );
//          temp.add( 161233.0 );
//          temp.add( 159476.0 );
//          temp.add( 159093.0 );
//          temp.add( 159658.0 );
//          temp.add( 159896.0 );
//          temp.add( 159692.0 );
//          temp.add( 162414.0 );
//          temp.add( 159732.0 );
//          temp.add( 159732.0 );
      
         // Consumer Loans Banks
         // The approximate entropy is: 0.0019094453602050976
         // The (1, 0.05) approximate entropy is: 0.09270423896778812
         // The (2, 0.05) approximate entropy is: 0.08754516895787923
//          temp.add( 357.5 );
//          temp.add( 359.0 );
//          temp.add( 358.9 );
//          temp.add( 360.2 );
//          temp.add( 364.1 );
//          temp.add( 366.1 );
//          temp.add( 370.4 );
//          temp.add( 372.8 );
//          temp.add( 373.7 );
//          temp.add( 377.8 );
//          temp.add( 381.6 );
//          temp.add( 386.4 );
//          temp.add( 388.3 );
//          temp.add( 391.0 );
//          temp.add( 393.8 );
//          temp.add( 399.2 );
//          temp.add( 404.8 );
//          temp.add( 408.2 );
//          temp.add( 415.4 );
//          temp.add( 420.9 );
//          temp.add( 425.8 );
//          temp.add( 433.3 );
//          temp.add( 436.3 );
//          temp.add( 443.7 );
//          temp.add( 447.4 );
//          temp.add( 448.3 );
//          temp.add( 451.8 );
//          temp.add( 457.1 );
//          temp.add( 460.2 );
//          temp.add( 464.3 );
//          temp.add( 468.7 );
//          temp.add( 472.8 );
//          temp.add( 474.9 );
//          temp.add( 476.1 );
//          temp.add( 479.1 );
//          temp.add( 484.4 );
//          temp.add( 486.6 );
//          temp.add( 485.7 );
//          temp.add( 488.4 );
//          temp.add( 491.1 );
//          temp.add( 489.6 );
//          temp.add( 494.2 );
//          temp.add( 496.7 );
//          temp.add( 497.4 );
//          temp.add( 500.7 );
//          temp.add( 503.7 );
//          temp.add( 506.5 );
//          temp.add( 505.3 );
//          temp.add( 506.0 );
//          temp.add( 506.4 );
//          temp.add( 503.1 );
//          temp.add( 501.9 );
//          temp.add( 503.4 );
//          temp.add( 507.3 );
//          temp.add( 512.9 );
//          temp.add( 514.9 );
//          temp.add( 508.9 );
//          temp.add( 505.0 );
//          temp.add( 502.9 );
//          temp.add( 498.8 );
//          temp.add( 494.1 );
//          temp.add( 491.5 );
//          temp.add( 494.1 );
//          temp.add( 497.2 );
//          temp.add( 494.6 );
//          temp.add( 493.6 );
//          temp.add( 491.8 );
//          temp.add( 493.7 );
//          temp.add( 495.2 );
//          temp.add( 498.0 );
//          temp.add( 498.2 );
//          temp.add( 497.4 );
//          temp.add( 498.0 );
//          temp.add( 496.8 );
//          temp.add( 496.7 );
//          temp.add( 497.4 );
//          temp.add( 493.2 );
//          temp.add( 490.1 );
//          temp.add( 483.7 );
//          temp.add( 477.8 );
//          temp.add( 477.6 );
//          temp.add( 478.2 );
//          temp.add( 478.1 );
//          temp.add( 485.5 );
//          temp.add( 489.4 );
//          temp.add( 493.3 );
//          temp.add( 498.4 );
//          temp.add( 502.0 );
//          temp.add( 504.1 );
//          temp.add( 510.4 );
//          temp.add( 514.4 );
//          temp.add( 524.0 );
//          temp.add( 527.0 );
//          temp.add( 528.2 );
//          temp.add( 531.0 );
//          temp.add( 532.4 );
//          temp.add( 533.3 );
//          temp.add( 535.7 );
//          temp.add( 536.5 );
//          temp.add( 540.4 );
//          temp.add( 545.2 );
//          temp.add( 546.5 );
//          temp.add( 549.1 );
//          temp.add( 549.8 );
//          temp.add( 548.7 );
//          temp.add( 549.9 );
//          temp.add( 554.0 );
//          temp.add( 550.5 );
//          temp.add( 548.0 );
//          temp.add( 552.2 );
//          temp.add( 552.9 );
//          temp.add( 556.0 );
//          temp.add( 555.6 );
//          temp.add( 554.3 );
//          temp.add( 552.9 );
//          temp.add( 563.5 );
//          temp.add( 570.5 );
//          temp.add( 580.6 );
//          temp.add( 580.5 );
//          temp.add( 579.4 );
//          temp.add( 576.4 );
//          temp.add( 579.2 );
//          temp.add( 577.8 );
//          temp.add( 575.5 );
//          temp.add( 585.1 );
//          temp.add( 589.2 );
//          temp.add( 593.7 );
//          temp.add( 594.1 );
//          temp.add( 594.3 );
//          temp.add( 593.8 );
//          temp.add( 622.5 );
//          temp.add( 634.9 );
//          temp.add( 639.4 );
//          temp.add( 641.7 );
//          temp.add( 644.2 );
//          temp.add( 643.2 );
//          temp.add( 647.2 );
//          temp.add( 649.0 );
//          temp.add( 681.1 );
//          temp.add( 683.2 );
//          temp.add( 685.1 );
//          temp.add( 686.4 );
//          temp.add( 680.9 );
//          temp.add( 685.4 );
//          temp.add( 687.4 );
//          temp.add( 689.5 );
//          temp.add( 695.1 );
//          temp.add( 694.6 );
//          temp.add( 691.9 );
//          temp.add( 694.2 );
//          temp.add( 699.8 );
//          temp.add( 707.4 );
//          temp.add( 709.4 );
//          temp.add( 703.2 );
//          temp.add( 702.9 );
//          temp.add( 695.9 );
//          temp.add( 693.4 );
//          temp.add( 696.4 );
//          temp.add( 706.8 );
//          temp.add( 711.6 );
//          temp.add( 719.9 );
//          temp.add( 714.2 );
//          temp.add( 710.7 );
//          temp.add( 718.1 );
//          temp.add( 718.0 );
//          temp.add( 723.5 );
//          temp.add( 726.7 );
//          temp.add( 731.0 );
//          temp.add( 730.8 );
//          temp.add( 734.1 );
//          temp.add( 732.2 );
//          temp.add( 737.1 );
//          temp.add( 741.5 );
//          temp.add( 751.0 );
//          temp.add( 761.2 );
//          temp.add( 764.6 );
//          temp.add( 772.8 );
//          temp.add( 775.1 );
//          temp.add( 783.0 );
//          temp.add( 792.5 );
//          temp.add( 791.2 );
//          temp.add( 793.8 );
//          temp.add( 799.5 );
//          temp.add( 804.4 );
//          temp.add( 808.2 );
//          temp.add( 813.3 );
//          temp.add( 823.7 );
//          temp.add( 829.7 );
//          temp.add( 835.1 );
//          temp.add( 852.4 );
//          temp.add( 857.2 );
//          temp.add( 860.0 );
//          temp.add( 869.0 );
//          temp.add( 879.5 );
//          temp.add( 870.8 );
//          temp.add( 859.4 );
//          temp.add( 858.1 );
//          temp.add( 856.3 );
//          temp.add( 852.8 );
//          temp.add( 850.9 );
//          temp.add( 848.7 );
//          temp.add( 848.7 );
         
         // Civ Unemployment
         // The approximate entropy is: 0.5315834689857253
         // The (1, 0.05) approximate entropy is: 0.23826509692977438
         // The (2, 0.05) approximate entropy is: 0.21584441160543677
//          temp.add( 7.3  );
//          temp.add( 7.1  );
//          temp.add( 7.0  );
//          temp.add( 7.1  );
//          temp.add( 7.1  );
//          temp.add( 7.0  );
//          temp.add( 6.9  );
//          temp.add( 6.8  );
//          temp.add( 6.7  );
//          temp.add( 6.8  );
//          temp.add( 6.6  );
//          temp.add( 6.5  );
//          temp.add( 6.6  );
//          temp.add( 6.6  );
//          temp.add( 6.5  );
//          temp.add( 6.4  );
//          temp.add( 6.1  );
//          temp.add( 6.1  );
//          temp.add( 6.1  );
//          temp.add( 6.0  );
//          temp.add( 5.9  );
//          temp.add( 5.8  );
//          temp.add( 5.6  );
//          temp.add( 5.5  );
//          temp.add( 5.6  );
//          temp.add( 5.4  );
//          temp.add( 5.4  );
//          temp.add( 5.8  );
//          temp.add( 5.6  );
//          temp.add( 5.6  );
//          temp.add( 5.7  );
//          temp.add( 5.7  );
//          temp.add( 5.6  );
//          temp.add( 5.5  );
//          temp.add( 5.6  );
//          temp.add( 5.6  );
//          temp.add( 5.6  );
//          temp.add( 5.5  );
//          temp.add( 5.5  );
//          temp.add( 5.6  );
//          temp.add( 5.6  );
//          temp.add( 5.3  );
//          temp.add( 5.5  );
//          temp.add( 5.1  );
//          temp.add( 5.2  );
//          temp.add( 5.2  );
//          temp.add( 5.4  );
//          temp.add( 5.4  );
//          temp.add( 5.3  );
//          temp.add( 5.2  );
//          temp.add( 5.2  );
//          temp.add( 5.1  );
//          temp.add( 4.9  );
//          temp.add( 5.0  );
//          temp.add( 4.9  );
//          temp.add( 4.8  );
//          temp.add( 4.9  );
//          temp.add( 4.7  );
//          temp.add( 4.6  );
//          temp.add( 4.7  );
//          temp.add( 4.6  );
//          temp.add( 4.6  );
//          temp.add( 4.7  );
//          temp.add( 4.3  );
//          temp.add( 4.4  );
//          temp.add( 4.5  );
//          temp.add( 4.5  );
//          temp.add( 4.5  );
//          temp.add( 4.6  );
//          temp.add( 4.5  );
//          temp.add( 4.4  );
//          temp.add( 4.4  );
//          temp.add( 4.3  );
//          temp.add( 4.4  );
//          temp.add( 4.2  );
//          temp.add( 4.3  );
//          temp.add( 4.2  );
//          temp.add( 4.3  );
//          temp.add( 4.3  );
//          temp.add( 4.2  );
//          temp.add( 4.2  );
//          temp.add( 4.1  );
//          temp.add( 4.1  );
//          temp.add( 4.0  );
//          temp.add( 4.0  );
//          temp.add( 4.1  );
//          temp.add( 4.0  );
//          temp.add( 3.8  );
//          temp.add( 4.0  );
//          temp.add( 4.0  );
//          temp.add( 4.0  );
//          temp.add( 4.1  );
//          temp.add( 3.9  );
//          temp.add( 3.9  );
//          temp.add( 3.9  );
//          temp.add( 3.9  );
//          temp.add( 4.2  );
//          temp.add( 4.2  );
//          temp.add( 4.3  );
//          temp.add( 4.4  );
//          temp.add( 4.3  );
//          temp.add( 4.5  );
//          temp.add( 4.6  );
//          temp.add( 4.9  );
//          temp.add( 5.0  );
//          temp.add( 5.3  );
//          temp.add( 5.5  );
//          temp.add( 5.7  );
//          temp.add( 5.7  );
//          temp.add( 5.7  );
//          temp.add( 5.7  );
//          temp.add( 5.9  );
//          temp.add( 5.8  );
//          temp.add( 5.8  );
//          temp.add( 5.8  );
//          temp.add( 5.7  );
//          temp.add( 5.7  );
//          temp.add( 5.7  );
//          temp.add( 5.9  );
//          temp.add( 6.0  );
//          temp.add( 5.8  );
//          temp.add( 5.9  );
//          temp.add( 5.9  );
//          temp.add( 6.0  );
//          temp.add( 6.1  );
//          temp.add( 6.3  );
//          temp.add( 6.2  );
//          temp.add( 6.1  );
//          temp.add( 6.1  );
//          temp.add( 6.0  );
//          temp.add( 5.8  );
//          temp.add( 5.7  );
//          temp.add( 5.7  );
//          temp.add( 5.6  );
//          temp.add( 5.8  );
//          temp.add( 5.6  );
//          temp.add( 5.6  );
//          temp.add( 5.6  );
//          temp.add( 5.5  );
//          temp.add( 5.4  );
//          temp.add( 5.4  );
//          temp.add( 5.5  );
//          temp.add( 5.4  );
//          temp.add( 5.4  );
//          temp.add( 5.2  );
//          temp.add( 5.4  );
//          temp.add( 5.2  );
//          temp.add( 5.2  );
//          temp.add( 5.1  );
//          temp.add( 5.1  );
//          temp.add( 5.0  );
//          temp.add( 4.9  );
//          temp.add( 5.0  );
//          temp.add( 5.0  );
//          temp.add( 5.0  );
//          temp.add( 4.8  );
//          temp.add( 4.7  );
//          temp.add( 4.8  );
//          temp.add( 4.7  );
//          temp.add( 4.7  );
//          temp.add( 4.7  );
//          temp.add( 4.6  );
//          temp.add( 4.7  );
//          temp.add( 4.7  );
//          temp.add( 4.5  );
//          temp.add( 4.4  );
//          temp.add( 4.5  );
//          temp.add( 4.4  );
//          temp.add( 4.6  );
//          temp.add( 4.5  );
//          temp.add( 4.4  );
//          temp.add( 4.5  );
//          temp.add( 4.5  );
//          temp.add( 4.6  );
//          temp.add( 4.7  );
//          temp.add( 4.7  );
//          temp.add( 4.7  );
//          temp.add( 4.8  );
//          temp.add( 4.7  );
//          temp.add( 4.9  );
//          temp.add( 4.9  );
//          temp.add( 4.8  );
//          temp.add( 5.1  );
//          temp.add( 5.0  );
//          temp.add( 5.5  );
//          temp.add( 5.6  );
//          temp.add( 5.8  );
//          temp.add( 6.2  );
//          temp.add( 6.2  );
//          temp.add( 6.6  );
//          temp.add( 6.8  );
//          temp.add( 7.2  );
//          temp.add( 7.6  );
//          temp.add( 8.1  );
//          temp.add( 8.5  );
//          temp.add( 8.9  );
//          temp.add( 9.4  );
//          temp.add( 9.5  );
//          temp.add( 9.4  );
//          temp.add( 9.7  );
//          temp.add( 9.8  );
//          temp.add( 10.2 );
         
         // Business Loans
         // The approximate entropy is: -0.004987541511036753
         // The (1, 0.05) approximate entropy is: 0.09497554305843359
         // The (2, 0.05) approximate entropy is: 0.09667034563243515
//          temp.add( 597.1   );
//          temp.add( 595.5   );
//          temp.add( 593.1   );
//          temp.add( 588.2   );
//          temp.add( 590.6   );
//          temp.add( 592.1   );
//          temp.add( 590.0   );
//          temp.add( 590.0   );
//          temp.add( 587.8   );
//          temp.add( 586.0   );
//          temp.add( 586.2   );
//          temp.add( 585.4   );
//          temp.add( 589.7   );
//          temp.add( 590.1   );
//          temp.add( 595.9   );
//          temp.add( 601.0   );
//          temp.add( 605.2   );
//          temp.add( 608.9   );
//          temp.add( 616.6   );
//          temp.add( 622.2   );
//          temp.add( 625.3   );
//          temp.add( 632.0   );
//          temp.add( 638.7   );
//          temp.add( 643.6   );
//          temp.add( 654.2   );
//          temp.add( 666.9   );
//          temp.add( 673.4   );
//          temp.add( 678.1   );
//          temp.add( 686.7   );
//          temp.add( 691.0   );
//          temp.add( 698.5   );
//          temp.add( 702.9   );
//          temp.add( 706.3   );
//          temp.add( 707.1   );
//          temp.add( 713.2   );
//          temp.add( 715.2   );
//          temp.add( 722.0   );
//          temp.add( 724.3   );
//          temp.add( 727.1   );
//          temp.add( 732.6   );
//          temp.add( 737.0   );
//          temp.add( 741.8   );
//          temp.add( 747.1   );
//          temp.add( 748.1   );
//          temp.add( 758.5   );
//          temp.add( 767.0   );
//          temp.add( 772.0   );
//          temp.add( 778.6   );
//          temp.add( 782.6   );
//          temp.add( 789.2   );
//          temp.add( 795.4   );
//          temp.add( 803.8   );
//          temp.add( 809.1   );
//          temp.add( 813.3   );
//          temp.add( 817.1   );
//          temp.add( 823.9   );
//          temp.add( 831.7   );
//          temp.add( 835.6   );
//          temp.add( 840.3   );
//          temp.add( 844.7   );
//          temp.add( 855.3   );
//          temp.add( 860.6   );
//          temp.add( 865.5   );
//          temp.add( 863.6   );
//          temp.add( 875.4   );
//          temp.add( 890.8   );
//          temp.add( 896.9   );
//          temp.add( 903.3   );
//          temp.add( 911.5   );
//          temp.add( 932.2   );
//          temp.add( 942.0   );
//          temp.add( 938.1   );
//          temp.add( 937.0   );
//          temp.add( 933.7   );
//          temp.add( 942.7   );
//          temp.add( 946.8   );
//          temp.add( 941.8   );
//          temp.add( 948.9   );
//          temp.add( 955.8   );
//          temp.add( 965.8   );
//          temp.add( 972.9   );
//          temp.add( 979.4   );
//          temp.add( 999.9   );
//          temp.add( 999.6   );
//          temp.add( 1003.5  );
//          temp.add( 1015.8  );
//          temp.add( 1024.5  );
//          temp.add( 1033.9  );
//          temp.add( 1050.7  );
//          temp.add( 1060.3  );
//          temp.add( 1067.0  );
//          temp.add( 1071.6  );
//          temp.add( 1073.1  );
//          temp.add( 1077.7  );
//          temp.add( 1079.8  );
//          temp.add( 1084.1  );
//          temp.add( 1092.9  );
//          temp.add( 1092.3  );
//          temp.add( 1090.0  );
//          temp.add( 1088.5  );
//          temp.add( 1083.7  );
//          temp.add( 1072.2  );
//          temp.add( 1066.5  );
//          temp.add( 1057.7  );
//          temp.add( 1060.4  );
//          temp.add( 1045.6  );
//          temp.add( 1035.4  );
//          temp.add( 1021.7  );
//          temp.add( 1015.6  );
//          temp.add( 1017.6  );
//          temp.add( 1010.9  );
//          temp.add( 1000.5  );
//          temp.add( 992.4   );
//          temp.add( 989.4   );
//          temp.add( 980.0   );
//          temp.add( 976.6   );
//          temp.add( 969.9   );
//          temp.add( 967.0   );
//          temp.add( 965.1   );
//          temp.add( 959.7   );
//          temp.add( 952.5   );
//          temp.add( 942.1   );
//          temp.add( 937.5   );
//          temp.add( 936.8   );
//          temp.add( 927.8   );
//          temp.add( 921.2   );
//          temp.add( 925.0   );
//          temp.add( 914.6   );
//          temp.add( 905.2   );
//          temp.add( 892.6   );
//          temp.add( 887.9   );
//          temp.add( 898.4   );
//          temp.add( 895.3   );
//          temp.add( 892.6   );
//          temp.add( 885.0   );
//          temp.add( 880.5   );
//          temp.add( 879.1   );
//          temp.add( 885.2   );
//          temp.add( 892.0   );
//          temp.add( 898.1   );
//          temp.add( 900.9   );
//          temp.add( 903.3   );
//          temp.add( 912.4   );
//          temp.add( 919.0   );
//          temp.add( 932.1   );
//          temp.add( 942.0   );
//          temp.add( 954.6   );
//          temp.add( 969.1   );
//          temp.add( 980.0   );
//          temp.add( 987.4   );
//          temp.add( 999.0   );
//          temp.add( 1005.6  );
//          temp.add( 1009.1  );
//          temp.add( 1022.1  );
//          temp.add( 1030.2  );
//          temp.add( 1041.3  );
//          temp.add( 1054.3  );
//          temp.add( 1063.4  );
//          temp.add( 1072.7  );
//          temp.add( 1092.2  );
//          temp.add( 1111.1  );
//          temp.add( 1122.8  );
//          temp.add( 1132.3  );
//          temp.add( 1159.1  );
//          temp.add( 1153.4  );
//          temp.add( 1165.1  );
//          temp.add( 1172.4  );
//          temp.add( 1182.6  );
//          temp.add( 1191.1  );
//          temp.add( 1203.6  );
//          temp.add( 1211.9  );
//          temp.add( 1223.1  );
//          temp.add( 1239.5  );
//          temp.add( 1260.8  );
//          temp.add( 1276.5  );
//          temp.add( 1305.8  );
//          temp.add( 1341.8  );
//          temp.add( 1376.9  );
//          temp.add( 1396.2  );
//          temp.add( 1424.4  );
//          temp.add( 1451.2  );
//          temp.add( 1469.4  );
//          temp.add( 1497.6  );
//          temp.add( 1512.5  );
//          temp.add( 1518.5  );
//          temp.add( 1531.3  );
//          temp.add( 1543.8  );
//          temp.add( 1559.0  );
//          temp.add( 1580.8  );
//          temp.add( 1643.4  );
//          temp.add( 1635.6  );
//          temp.add( 1617.4  );
//          temp.add( 1600.6  );
//          temp.add( 1586.5  );
//          temp.add( 1563.6  );
//          temp.add( 1544.1  );
//          temp.add( 1524.1  );
//          temp.add( 1497.7  );
//          temp.add( 1480.6  );
//          temp.add( 1449.0  );
//          temp.add( 1411.8  );
//          temp.add( 1411.8  );
         
         // U Mich Consumer Sentiment
         // The approximate entropy is: -0.004987541511036753
         // The (1, 0.05) approximate entropy is: 0.9465014567809997
         // The (2, 0.05) approximate entropy is: 0.7077538719732894
//          temp.add( 89.3   );
//          temp.add( 86.6   );
//          temp.add( 85.9   );
//          temp.add( 85.6   );
//          temp.add( 80.3   );
//          temp.add( 81.5   );
//          temp.add( 77.0   );
//          temp.add( 77.3   );
//          temp.add( 77.9   );
//          temp.add( 82.7   );
//          temp.add( 81.2   );
//          temp.add( 88.2   );
//          temp.add( 94.3   );
//          temp.add( 93.2   );
//          temp.add( 91.5   );
//          temp.add( 92.6   );
//          temp.add( 92.8   );
//          temp.add( 91.2   );
//          temp.add( 89.0   );
//          temp.add( 91.7   );
//          temp.add( 91.5   );
//          temp.add( 92.7   );
//          temp.add( 91.6   );
//          temp.add( 95.1   );
//          temp.add( 97.6   );
//          temp.add( 95.1   );
//          temp.add( 90.3   );
//          temp.add( 92.5   );
//          temp.add( 89.8   );
//          temp.add( 92.7   );
//          temp.add( 94.4   );
//          temp.add( 96.2   );
//          temp.add( 88.9   );
//          temp.add( 90.2   );
//          temp.add( 88.2   );
//          temp.add( 91.0   );
//          temp.add( 89.3   );
//          temp.add( 88.5   );
//          temp.add( 93.7   );
//          temp.add( 92.7   );
//          temp.add( 89.4   );
//          temp.add( 92.4   );
//          temp.add( 94.7   );
//          temp.add( 95.3   );
//          temp.add( 94.7   );
//          temp.add( 96.5   );
//          temp.add( 99.2   );
//          temp.add( 96.9   );
//          temp.add( 97.4   );
//          temp.add( 99.7   );
//          temp.add( 100.0  );
//          temp.add( 101.4  );
//          temp.add( 103.2  );
//          temp.add( 104.5  );
//          temp.add( 107.1  );
//          temp.add( 104.4  );
//          temp.add( 106.0  );
//          temp.add( 105.6  );
//          temp.add( 107.2  );
//          temp.add( 102.1  );
//          temp.add( 106.6  );
//          temp.add( 110.4  );
//          temp.add( 106.5  );
//          temp.add( 108.7  );
//          temp.add( 106.5  );
//          temp.add( 105.6  );
//          temp.add( 105.2  );
//          temp.add( 104.4  );
//          temp.add( 100.9  );
//          temp.add( 97.4   );
//          temp.add( 102.7  );
//          temp.add( 100.5  );
//          temp.add( 103.9  );
//          temp.add( 108.1  );
//          temp.add( 105.7  );
//          temp.add( 104.6  );
//          temp.add( 106.8  );
//          temp.add( 107.3  );
//          temp.add( 106.0  );
//          temp.add( 104.5  );
//          temp.add( 107.2  );
//          temp.add( 103.2  );
//          temp.add( 107.2  );
//          temp.add( 105.4  );
//          temp.add( 112.0  );
//          temp.add( 111.3  );
//          temp.add( 107.1  );
//          temp.add( 109.2  );
//          temp.add( 110.7  );
//          temp.add( 106.4  );
//          temp.add( 108.3  );
//          temp.add( 107.3  );
//          temp.add( 106.8  );
//          temp.add( 105.8  );
//          temp.add( 107.6  );
//          temp.add( 98.4   );
//          temp.add( 94.7   );
//          temp.add( 90.6   );
//          temp.add( 91.5   );
//          temp.add( 88.4   );
//          temp.add( 92.0   );
//          temp.add( 92.6   );
//          temp.add( 92.4   );
//          temp.add( 91.5   );
//          temp.add( 81.8   );
//          temp.add( 82.7   );
//          temp.add( 83.9   );
//          temp.add( 88.8   );
//          temp.add( 93.0   );
//          temp.add( 90.7   );
//          temp.add( 95.7   );
//          temp.add( 93.0   );
//          temp.add( 96.9   );
//          temp.add( 92.4   );
//          temp.add( 88.1   );
//          temp.add( 87.6   );
//          temp.add( 86.1   );
//          temp.add( 80.6   );
//          temp.add( 84.2   );
//          temp.add( 86.7   );
//          temp.add( 82.4   );
//          temp.add( 79.9   );
//          temp.add( 77.6   );
//          temp.add( 86.0   );
//          temp.add( 92.1   );
//          temp.add( 89.7   );
//          temp.add( 90.9   );
//          temp.add( 89.3   );
//          temp.add( 87.7   );
//          temp.add( 89.6   );
//          temp.add( 93.7   );
//          temp.add( 92.6   );
//          temp.add( 103.8  );
//          temp.add( 94.4   );
//          temp.add( 95.8   );
//          temp.add( 94.2   );
//          temp.add( 90.2   );
//          temp.add( 95.6   );
//          temp.add( 96.7   );
//          temp.add( 95.9   );
//          temp.add( 94.2   );
//          temp.add( 91.7   );
//          temp.add( 92.8   );
//          temp.add( 97.1   );
//          temp.add( 95.5   );
//          temp.add( 94.1   );
//          temp.add( 92.6   );
//          temp.add( 87.7   );
//          temp.add( 86.9   );
//          temp.add( 96.0   );
//          temp.add( 96.5   );
//          temp.add( 89.1   );
//          temp.add( 76.9   );
//          temp.add( 74.2   );
//          temp.add( 81.6   );
//          temp.add( 91.5   );
//          temp.add( 91.2   );
//          temp.add( 86.7   );
//          temp.add( 88.9   );
//          temp.add( 87.4   );
//          temp.add( 79.1   );
//          temp.add( 84.9   );
//          temp.add( 84.7   );
//          temp.add( 82.0   );
//          temp.add( 85.4   );
//          temp.add( 93.6   );
//          temp.add( 92.1   );
//          temp.add( 91.7   );
//          temp.add( 96.9   );
//          temp.add( 91.3   );
//          temp.add( 88.4   );
//          temp.add( 87.1   );
//          temp.add( 88.3   );
//          temp.add( 85.3   );
//          temp.add( 90.4   );
//          temp.add( 83.4   );
//          temp.add( 83.4   );
//          temp.add( 80.9   );
//          temp.add( 76.1   );
//          temp.add( 75.5   );
//          temp.add( 78.4   );
//          temp.add( 70.8   );
//          temp.add( 69.5   );
//          temp.add( 62.6   );
//          temp.add( 59.8   );
//          temp.add( 56.4   );
//          temp.add( 61.2   );
//          temp.add( 63.0   );
//          temp.add( 70.3   );
//          temp.add( 57.6   );
//          temp.add( 55.3   );
//          temp.add( 60.1   );
//          temp.add( 61.2   );
//          temp.add( 56.3   );
//          temp.add( 57.3   );
//          temp.add( 65.1   );
//          temp.add( 68.7   );
//          temp.add( 70.8   );
//          temp.add( 66.0   );
//          temp.add( 65.7   );
//          temp.add( 73.5   );
//          temp.add( 73.5   );
      
         // SPY
         // The approximate entropy is: -0.004987541511036753
         // The (1, 0.05) approximate entropy is: 0.540893466832228
         // The (2, 0.05) approximate entropy is: 0.4666642380954631
         temp.add( 43.94    );
         temp.add( 44.41    );
         temp.add( 45.19    );
         temp.add( 44.03    );
         temp.add( 45.22    );
         temp.add( 45.06    );
         temp.add( 44.84    );
         temp.add( 46.56    );
         temp.add( 45.94    );
         temp.add( 46.84    );
         temp.add( 46.34    );
         temp.add( 46.59    );
         temp.add( 48.22    );
         temp.add( 46.81    );
         temp.add( 44.59    );
         temp.add( 45.09    );
         temp.add( 45.81    );
         temp.add( 44.47    );
         temp.add( 45.91    );
         temp.add( 47.66    );
         temp.add( 46.17    );
         temp.add( 47.48    );
         temp.add( 45.59    );
         temp.add( 45.56    );
         temp.add( 47.09    );
         temp.add( 49.02    );
         temp.add( 50.11    );
         temp.add( 51.59    );
         temp.add( 53.64    );
         temp.add( 54.41    );
         temp.add( 56.16    );
         temp.add( 56.41    );
         temp.add( 58.48    );
         temp.add( 58.31    );
         temp.add( 60.91    );
         temp.add( 61.48    );
         temp.add( 63.67    );
         temp.add( 63.88    );
         temp.add( 64.69    );
         temp.add( 65.39    );
         temp.add( 66.87    );
         temp.add( 67.11    );
         temp.add( 64.09    );
         temp.add( 65.33    );
         temp.add( 68.62    );
         temp.add( 70.84    );
         temp.add( 76.02    );
         temp.add( 73.84    );
         temp.add( 78.41    );
         temp.add( 79.16    );
         temp.add( 75.37    );
         temp.add( 80.09    );
         temp.add( 85.16    );
         temp.add( 88.31    );
         temp.add( 95.31    );
         temp.add( 90.37    );
         temp.add( 94.37    );
         temp.add( 92.06    );
         temp.add( 95.62    );
         temp.add( 97.06    );
         temp.add( 98.31    );
         temp.add( 105.12   );
         temp.add( 109.94   );
         temp.add( 111.34   );
         temp.add( 109.03   );
         temp.add( 113.31   );
         temp.add( 111.78   );
         temp.add( 96.0     );
         temp.add( 101.75   );
         temp.add( 110.0      );
         temp.add( 116.12   );
         temp.add( 123.31   );
         temp.add( 127.66   );
         temp.add( 123.56   );
         temp.add( 128.38   );
         temp.add( 133.25   );
         temp.add( 130.2    );
         temp.add( 137.0      );
         temp.add( 132.75   );
         temp.add( 132.06   );
         temp.add( 128.75   );
         temp.add( 137.0      );
         temp.add( 139.28   );
         temp.add( 146.88   );
         temp.add( 139.56   );
         temp.add( 137.44   );
         temp.add( 150.38   );
         temp.add( 145.09   );
         temp.add( 142.81   );
         temp.add( 145.28   );
         temp.add( 143.0      );
         temp.add( 152.34   );
         temp.add( 143.63   );
         temp.add( 142.95   );
         temp.add( 132.28   );
         temp.add( 131.19   );
         temp.add( 137.02   );
         temp.add( 123.95   );
         temp.add( 116.69   );
         temp.add( 126.66   );
         temp.add( 125.95   );
         temp.add( 122.6    );
         temp.add( 121.35   );
         temp.add( 114.15   );
         temp.add( 104.44   );
         temp.add( 105.8    );
         temp.add( 114.05   );
         temp.add( 114.3    );
         temp.add( 113.18   );
         temp.add( 111.15   );
         temp.add( 114.52   );
         temp.add( 107.86   );
         temp.add( 107.22   );
         temp.add( 98.96    );
         temp.add( 91.16    );
         temp.add( 91.78    );
         temp.add( 81.79    );
         temp.add( 88.52    );
         temp.add( 93.98    );
         temp.add( 88.23    );
         temp.add( 86.06    );
         temp.add( 84.9     );
         temp.add( 84.74    );
         temp.add( 91.91    );
         temp.add( 96.95    );
         temp.add( 97.63    );
         temp.add( 99.39    );
         temp.add( 101.44   );
         temp.add( 99.95    );
         temp.add( 105.3    );
         temp.add( 106.45   );
         temp.add( 111.28   );
         temp.add( 113.48   );
         temp.add( 115.02   );
         temp.add( 113.1    );
         temp.add( 110.96   );
         temp.add( 112.86   );
         temp.add( 114.53   );
         temp.add( 110.84   );
         temp.add( 111.11   );
         temp.add( 111.76   );
         temp.add( 113.2    );
         temp.add( 117.89   );
         temp.add( 120.87   );
         temp.add( 118.16   );
         temp.add( 120.63   );
         temp.add( 117.96   );
         temp.add( 115.75   );
         temp.add( 119.48   );
         temp.add( 119.18   );
         temp.add( 123.74   );
         temp.add( 122.58   );
         temp.add( 123.04   );
         temp.add( 120.13   );
         temp.add( 125.41   );
         temp.add( 124.51   );
         temp.add( 127.5    );
         temp.add( 128.23   );
         temp.add( 129.83   );
         temp.add( 131.47   );
         temp.add( 127.51   );
         temp.add( 127.28   );
         temp.add( 127.85   );
         temp.add( 130.64   );
         temp.add( 133.58   );
         temp.add( 137.79   );
         temp.add( 140.53   );
         temp.add( 141.62   );
         temp.add( 143.75   );
         temp.add( 140.93   );
         temp.add( 142.0      );
         temp.add( 148.29   );
         temp.add( 153.32   );
         temp.add( 150.43   );
         temp.add( 145.72   );
         temp.add( 147.59   );
         temp.add( 152.58   );
         temp.add( 154.65   );
         temp.add( 148.66   );
         temp.add( 146.21   );
         temp.add( 137.37   );
         temp.add( 133.82   );
         temp.add( 131.97   );
         temp.add( 138.26   );
         temp.add( 140.35   );
         temp.add( 127.98   );
         temp.add( 126.83   );
         temp.add( 128.79   );
         temp.add( 115.99   );
         temp.add( 96.83    );
         temp.add( 90.09    );
         temp.add( 90.24    );
         temp.add( 82.83    );
         temp.add( 73.93    );
         temp.add( 79.52    );
         temp.add( 87.42    );
         temp.add( 92.53    );
         temp.add( 91.95    );
         temp.add( 98.81    );
         temp.add( 102.46   );
         temp.add( 105.59   );
         temp.add( 103.56   );

      //double[] theArray = { 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1 };
      //double[] theArray = { 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0 };
      double[] theArray = new double[ temp.size() ];
      temp = (new MathUtilities()).normalize( temp, 1 );
      for( int i=0; i<temp.size(); i++ )
      {
         theArray[i] = temp.get( i );  
      }

      ApproximateEntropy theAppEn = new ApproximateEntropy( theArray );
      System.out.println( "The approximate entropy is: " + theAppEn.getEntropy() );
      theAppEn = new ApproximateEntropy( theArray, 1, 0.05 );
      System.out.println( "The (1, 0.05) approximate entropy is: " + theAppEn.getEntropy() );
      theAppEn = new ApproximateEntropy( theArray, 2, 0.05 );
      System.out.println( "The (2, 0.05) approximate entropy is: " + theAppEn.getEntropy() );
   }

} // end ApproximateEntropy
